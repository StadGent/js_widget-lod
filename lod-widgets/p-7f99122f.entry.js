import{r as e,h as t,F as s}from"./p-23ad6437.js";import{i,g as a,a as l}from"./p-a98ce3c7.js";const n='.sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}.lod-table td{-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto}.lod-table dd{-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto}.lod-table .pager__items{justify-content:center !important}.lod-table .results-text{margin-bottom:20px}.lod-table .cta-btn{align-self:flex-start;font-size:16px;line-height:24px;margin-left:30px;margin-bottom:60px}.lod-table .cta-btn:before{content:url("./assets/share-icon.svg");width:24px;height:24px;margin-left:0;border-bottom:0;position:absolute;vertical-align:-50%;left:-30px;padding-top:1px}.lod-table .filter__results{margin-left:0}.lod-table #previous,.lod-table #next{cursor:pointer;display:block}';const d=n;const h=class{constructor(t){e(this,t);this.endpoint=undefined;this.query=undefined;this.countQuery=undefined;this.itemsPerPage=undefined;this.ctaText=undefined;this.ctaUrl=undefined;this.tableCaption=undefined;this.queryModified=undefined;this.count=0;this.page=1;this.headers=undefined;this.items=undefined;this.paginationString=undefined;this._itemsPerPage=10;this.pagesResult=[];this.currentPageItems=undefined;this.isFetching=false;this.visualPage=1}componentWillLoad(){this.queryModified=this.query;if(i(this.itemsPerPage)){this._itemsPerPage=Number(this.itemsPerPage)}this.paginationString=`LIMIT ${this._itemsPerPage} OFFSET ${this._itemsPerPage*this.page-this._itemsPerPage}`;this.queryModified+=` ${this.paginationString}`;this.executeQuery();this.executeCountQuery()}formatHeader(e){let t=e.replace(/_/g," ");t=t.charAt(0).toUpperCase()+t.slice(1);return t}get queryUrl(){const e=new URL(this.endpoint);e.searchParams.set("query",this.queryModified);return e}async executeCountQuery(){const e=new URL(this.endpoint);e.searchParams.set("query",this.countQuery);this.isFetching=true;const t=await fetch(e.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"}});if(t.ok){const e=await t.json();this.count=Number(e.results.bindings[0].count.value);this.isFetching=false}else{console.log("Error when getting count data.");console.log(this.queryModified)}}async executeQuery(){if(!this.pagesResult.find((e=>e.page===this.page))){const e=await fetch(this.queryUrl.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"}});if(e.ok){const t=await e.json();const s=t.head.vars.filter((e=>!e.startsWith("_")));this.headers=s;const i=t.results.bindings;this.pagesResult.push({page:this.page,result:i});this.currentPageItems=i}else{console.log("Error when getting data.");console.log(this.queryModified)}}else{this.currentPageItems=this.pagesResult.find((e=>e.page===this.page)).result}}get queryWithoutLimit(){return a(this.queryModified,this.paginationString)}async decrementPage(){if(this.page>1){this.queryModified=this.queryWithoutLimit;this.page-=1;this.paginationString=`LIMIT ${this._itemsPerPage} OFFSET ${this._itemsPerPage*this.page-this._itemsPerPage}`;this.queryModified+=this.paginationString;await this.executeQuery();this.visualPage-=1}}async incrementPage(){if(this.page<this.count){this.queryModified=this.queryWithoutLimit;this.page+=1;this.paginationString=`LIMIT ${this._itemsPerPage} OFFSET ${this._itemsPerPage*this.page-this._itemsPerPage}`;this.queryModified+=this.paginationString;await this.executeQuery();this.visualPage+=1}}render(){var e,i;return t("div",{key:"db2c3ac61a1097e93c54a3d91f8597053cc5b1ee",class:"lod-table"},t("div",{key:"46a534dead9c1dfb18eec1ceb77bb2ce03bd5474",class:"responsive-table"},t("div",{key:"3a5be606e4614f3689a848e9e15f1fdd5439f00d",class:"table-wrapper"},t("table",{key:"e48c58cf28ad9fab0833b2c7b6cb9ed0660a9746"},t("tr",{key:"30de35b5b7add010767d0d6079b652ec1523f4e5"},this.headers&&this.headers.map((e=>t("th",{scope:"col"},this.formatHeader(e))))),(e=this.currentPageItems)===null||e===void 0?void 0:e.map((e=>t("tr",null,this.headers&&this.headers.map((s=>t("td",null,l(e===null||e===void 0?void 0:e[s]))))))),this.tableCaption&&this.tableCaption!==""&&t("caption",{key:"3fdac40c6d57f6afebb3ede7e610b4c920a68839",class:"sr-only"},this.tableCaption)))),t("div",{key:"b74381fbe11271021b692351920e603e8c0d2430","aria-labelledby":"table-without-row-headers-list-description",class:"table-list"},t("ul",{key:"a54726e59ae4ea846758145b873e911bb6f33190"},this.currentPageItems&&this.headers&&this.currentPageItems.map((e=>t("li",null,t("dl",null,this.headers&&this.headers.map((i=>t(s,null,t("dt",null,this.formatHeader(i)),t("dd",null,e===null||e===void 0?void 0:e[i].value))))))))),this.tableCaption&&this.tableCaption!==""&&t("div",{key:"205f16539c95830540f087b53936ab9d5466d64f",class:"sr-only",id:"table-list-description"},this.tableCaption)),t("a",{key:"04dae4d177ca8d78ce4b8cd8ba68a094d28d7296",class:"cta-btn",href:this.ctaUrl&&this.ctaUrl!==""?this.ctaUrl:`${this.queryUrl.toString()}`},(i=this.ctaText)!==null&&i!==void 0?i:"Bekijk de data via ons SPARQL-endpoint"),this.count!==0&&this.currentPageItems&&t("nav",{key:"157c0ecc6fd503f31fd86e746983087f68fea490",class:"pager","aria-labelledby":"pagination_1-55553"},t("h2",{key:"936e65617920b0eabd30606d38003b04b2a5463b",id:"pagination_1-55553",class:"visually-hidden"},"Pagination"),t("ul",{key:"5fc00bcac8f07c83675cb72b29f69469feb05033",class:"pager__items"},t("li",{key:"6a493b9b20ea58c65d0bb1d1312388a4105d09cf",onClick:()=>this.visualPage===this.page?this.decrementPage():null,style:{display:this.visualPage===1?"none":"block"},id:"previous",class:"previous"},t("a",{key:"d06fec7e8884199db25b27b7fb9a12c8c7083f5a",class:"standalone-link back"},"Vorige",t("span",{key:"5845d309abd00478332b3bf1382e6e3cc1ed2ef3",class:"visually-hidden"},"pagina"))),t("li",{key:"5a1b1027cdcfc8712f6317968a5de914bac0ebd4",class:"current-page"},"Pagina ",this.visualPage," van ",this.count),t("li",{key:"ee74f3f276d08d6fb38f4ea8755bf2d304ba4d4d",onClick:()=>this.visualPage===this.page?this.incrementPage():null,style:{display:this.visualPage===this.count?"none":"block"},id:"next",class:"next"},t("a",{key:"4041301c12516873fcd55325ad97905901405291",class:"standalone-link"},"Volgende",t("span",{key:"2e03050e7e19ce11320beb28e861d1beca17b87f",class:"visually-hidden"},"pagina"))))))}};h.style=d;export{h as lod_table};
//# sourceMappingURL=p-7f99122f.entry.js.map