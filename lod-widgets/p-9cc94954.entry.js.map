{"version":3,"names":["lodCardCss","LodCardStyle0","LodCard","tagSplitted","_a","this","tag","split","imageUrlFormatted","imageUrl","readMoreTextFormatted","readMoreText","render","h","key","class","cardTitle","length","_b","map","description","address","target","href","date","readMoreUrl","width","height","src","alt","tabIndex","lodCardsCss","LodCardsStyle0","LodCards","componentWillLoad","queryModified","query","itemsPerPage","Number","_itemsPerPage","paginationString","page","executeQuery","executeCountQuery","queryUrl","url","URL","endpoint","searchParams","set","countQuery","isFetching","response","fetch","toString","headers","Accept","ok","result","json","count","results","bindings","value","console","log","pagesResult","find","res","data","push","currentPageItems","queryWithoutLimit","getQueryWithoutLimit","decrementPage","visualPage","incrementPage","item","_c","_d","_e","getFormattedObjectValue","ctaUrl","ctaText","id","onClick","style","display"],"sources":["src/components/lod-card/lod-card.scss?tag=lod-card","src/components/lod-card/lod-card.tsx","src/components/lod-cards/lod-cards.scss?tag=lod-cards","src/components/lod-cards/lod-cards.tsx"],"sourcesContent":[".lod-card {\n  .content__second {\n    .read-more {\n      align-self: flex-start;\n    }\n  }\n  &__description {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    margin-bottom: 20px;\n\n    #previous,\n    #next {\n      cursor: pointer;\n    }\n\n    p {\n      margin: 0;\n    }\n\n    a {\n      align-self: flex-start;\n      font-size: 14px;\n      line-height: 24px;\n      font-weight: 400;\n      border-bottom-width: 1px;\n      margin-left: 21px;\n      cursor: pointer;\n\n      &:before {\n        content: url(\"./assets/location.svg\");\n        width: 16px;\n        height: 16px;\n        margin-left: 0;\n        border-bottom: 0;\n        position: absolute;\n        vertical-align: -50%;\n        left: -21px;\n        padding-top: 1px;\n      }\n    }\n\n    time {\n      align-self: flex-start;\n      font-size: 14px;\n      line-height: 24px;\n      font-weight: 400;\n      border-bottom-width: 1px;\n      margin-left: 21px;\n      cursor: pointer;\n\n      &:before {\n        content: url(\"./assets/clock.svg\");\n        width: 16px;\n        height: 16px;\n        margin-left: 0;\n        border-bottom: 0;\n        position: absolute;\n        vertical-align: -50%;\n        left: 0;\n        padding-top: 3px;\n      }\n    }\n  }\n}\n","import { Component, Prop, h } from \"@stencil/core\";\n\n@Component({\n  tag: \"lod-card\",\n  styleUrl: \"lod-card.scss\",\n  shadow: false,\n})\nexport class LodCard {\n  @Prop() cardTitle: string;\n  @Prop() description: string;\n  @Prop() address: string;\n  @Prop() addressUrl: string;\n  @Prop() date: string;\n  @Prop() tag: string;\n  @Prop() imageUrl: string;\n  @Prop() readMoreText: string;\n  @Prop() readMoreUrl: string;\n\n  private get tagSplitted(): string[] {\n    return this.tag?.split(\";\");\n  }\n\n  private get imageUrlFormatted() {\n    const imageUrl = this.imageUrl;\n    return imageUrl && imageUrl !== \"\"\n      ? imageUrl\n      : \"https://via.placeholder.com/570x570&text=8:5+(570x570)\";\n  }\n\n  private get readMoreTextFormatted() {\n    const readMoreText = this.readMoreText;\n    return readMoreText && readMoreText !== \"\" ? readMoreText : \"Lees meer\";\n  }\n\n  render() {\n    return (\n      <li class=\"lod-card teaser teaser--wide\">\n        <article class=\"teaser-content\">\n          <div class=\"content__second\">\n            <h3 class=\"h4\">{this.cardTitle}</h3>\n\n            {this.tagSplitted?.length > 0 && (\n              <div class=\"tag-list-wrapper\">\n                <ul class=\"tag-list\">\n                  {this.tagSplitted?.map((tag) => (\n                    <li>\n                      <span class=\"tag\"> {tag} </span>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n\n            <div class=\"lod-card__description\">\n              {this.description && this.description !== \"\" && (\n                <p>{this.description}</p>\n              )}\n\n              {this.address && this.address !== \"\" && (\n                <a\n                  target=\"_blank\"\n                  href={`https://maps.google.com/maps?q=${this.address}`}\n                >\n                  {this.address}\n                </a>\n              )}\n              {this.date && this.date !== \"\" && <time>{this.date}</time>}\n            </div>\n\n            <a href={this.readMoreUrl} class=\"read-more standalone-link\">\n              {this.readMoreTextFormatted}\n              <span class=\"visually-hidden\"> over {this.cardTitle} </span>\n            </a>\n          </div>\n\n          <div class=\"content__first\">\n            <div class=\"tags-label-wrapper\"></div>\n\n            <div class=\"figure-wrapper\">\n              <figure>\n                <div class=\"image-wrapper\" data-ratio=\"1:1\">\n                  <img\n                    width=\"280\"\n                    height=\"280\"\n                    src={this.imageUrlFormatted}\n                    alt=\"\"\n                  />\n                </div>\n              </figure>\n            </div>\n          </div>\n        </article>\n        <a\n          href=\"#\"\n          class=\"teaser-overlay-link\"\n          tabIndex={-1}\n          aria-hidden=\"true\"\n        >\n          {this.readMoreText}\n        </a>\n      </li>\n    );\n  }\n}\n",".lod-cards {\n  display: flex;\n  flex-direction: column;\n\n  .pager__items {\n    justify-content: center !important;\n  }\n\n  .results-text {\n    margin-bottom: 20px;\n  }\n\n  .cta-btn {\n    align-self: flex-start;\n    font-size: 16px;\n    line-height: 24px;\n    margin-left: 30px;\n    margin-bottom: 60px;\n\n    &:before {\n      content: url(\"./assets/share-icon.svg\");\n      width: 24px;\n      height: 24px;\n      margin-left: 0;\n      border-bottom: 0;\n      position: absolute;\n      vertical-align: -50%;\n      left: -30px;\n      padding-top: 1px;\n    }\n  }\n\n  .filter__results {\n    margin-left: 0;\n  }\n\n  #previous,\n  #next {\n    cursor: pointer;\n    display: block;\n  }\n}\n","import { Component, Prop, State, h } from \"@stencil/core\";\nimport {\n  getFormattedObjectValue,\n  getQueryWithoutLimit,\n} from \"../../utils/utils\";\n\n@Component({\n  tag: \"lod-cards\",\n  styleUrl: \"lod-cards.scss\",\n  shadow: false,\n})\nexport class LodCards {\n  @Prop() endpoint: string;\n  @Prop() query: string;\n  @Prop() countQuery: string;\n  @Prop() itemsPerPage: string;\n  @Prop() ctaText: string;\n  @Prop() ctaUrl: string;\n\n  @State() queryModified: string;\n  @State() count: number = 0;\n  @State() page: number = 1;\n  @State() items: any[];\n  @State() paginationString: string;\n  @State() _itemsPerPage: number = 10;\n  @State() pagesResult: { page: number; result: any }[] = [];\n  @State() currentPageItems: any;\n  @State() isFetching: boolean = false;\n  @State() visualPage: number = 1;\n\n  componentWillLoad() {\n    this.queryModified = this.query;\n    if (\n      this.itemsPerPage &&\n      this.itemsPerPage !== \"\" &&\n      Number(this.itemsPerPage)\n    ) {\n      this._itemsPerPage = Number(this.itemsPerPage);\n    }\n    this.paginationString = `LIMIT ${this._itemsPerPage} OFFSET ${this._itemsPerPage * this.page - this._itemsPerPage}`;\n    this.queryModified += ` ${this.paginationString}`;\n    this.executeQuery();\n    this.executeCountQuery();\n  }\n\n  get queryUrl() {\n    const url = new URL(this.endpoint);\n    url.searchParams.set(\"query\", this.queryModified);\n    return url;\n  }\n\n  async executeCountQuery() {\n    const url = new URL(this.endpoint);\n    url.searchParams.set(\"query\", this.countQuery);\n\n    this.isFetching = true;\n    const response = await fetch(url.toString(), {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Accept: \"application/sparql-results+json\",\n      },\n    });\n\n    if (response.ok) {\n      const result: any = await response.json();\n      this.count = Number(result.results.bindings[0].count.value);\n      this.isFetching = false;\n    } else {\n      console.log(\"Error when getting count data.\");\n      console.log(this.queryModified);\n    }\n  }\n\n  async executeQuery() {\n    // Check if we have the result cached locally\n    if (!this.pagesResult.find((res) => res.page === this.page)) {\n      const response = await fetch(this.queryUrl.toString(), {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          Accept: \"application/sparql-results+json\",\n        },\n      });\n\n      if (response.ok) {\n        const result: any = await response.json();\n\n        const data = result.results.bindings;\n\n        this.pagesResult.push({\n          page: this.page,\n          result: data,\n        });\n\n        this.currentPageItems = data;\n      } else {\n        console.log(\"Error when getting data.\");\n        console.log(this.queryModified);\n      }\n    } else {\n      this.currentPageItems = this.pagesResult.find(\n        (res) => res.page === this.page,\n      ).result;\n    }\n  }\n\n  get queryWithoutLimit() {\n    return getQueryWithoutLimit(this.queryModified, this.paginationString);\n  }\n\n  async decrementPage() {\n    if (this.page > 1) {\n      this.queryModified = this.queryWithoutLimit;\n      this.page -= 1;\n\n      this.paginationString = `LIMIT ${this._itemsPerPage} OFFSET ${this._itemsPerPage * this.page - this._itemsPerPage}`;\n      this.queryModified += this.paginationString;\n      await this.executeQuery();\n      this.visualPage -= 1;\n    }\n  }\n\n  async incrementPage() {\n    if (this.page < this.count) {\n      this.queryModified = this.queryWithoutLimit;\n      this.page += 1;\n      this.paginationString = `LIMIT ${this._itemsPerPage} OFFSET ${this._itemsPerPage * this.page - this._itemsPerPage}`;\n      this.queryModified += this.paginationString;\n      await this.executeQuery();\n      this.visualPage += 1;\n    }\n  }\n\n  render() {\n    if (this.count !== 0 && this.currentPageItems) {\n      return (\n        <div class=\"lod-cards\">\n          <span class=\"results-text\">\n            <b>Er zijn {this.count} resultaten</b>\n          </span>\n          <ul class=\"filter__results\">\n            {this.currentPageItems?.map((item) => (\n              <lod-card\n                tag={item[\"cat\"]?.value}\n                address={item[\"loc\"]?.value}\n                card-title={\"test\"}\n                image-url={item[\"img\"]?.value}\n                description={item[\"txt\"]?.value}\n                read-more-url={item[\"url\"]?.value}\n                date={getFormattedObjectValue(item[\"dat\"])}\n              />\n            ))}\n          </ul>\n          <a\n            class=\"cta-btn\"\n            href={\n              this.ctaUrl && this.ctaUrl !== \"\"\n                ? this.ctaUrl\n                : `${this.queryUrl.toString()}`\n            }\n          >\n            {this.ctaText ?? \"Bekijk de data via ons SPARQL-endpoint\"}\n          </a>\n          {this.count !== 0 && this.currentPageItems && (\n            <nav class=\"pager\" aria-labelledby=\"pagination_1-55553\">\n              <h2 id=\"pagination_1-55553\" class=\"visually-hidden\">\n                Pagination\n              </h2>\n\n              <ul class=\"pager__items\">\n                <li\n                  onClick={() =>\n                    this.visualPage === this.page ? this.decrementPage() : null\n                  }\n                  style={{ display: this.visualPage === 1 ? \"none\" : \"block\" }}\n                  id=\"previous\"\n                  class=\"previous\"\n                >\n                  <a class=\"standalone-link back\">\n                    Vorige\n                    <span class=\"visually-hidden\">pagina</span>\n                  </a>\n                </li>\n                <li class=\"current-page\">\n                  Pagina {this.visualPage} van {this.count}\n                </li>\n\n                <li\n                  onClick={() =>\n                    this.visualPage === this.page ? this.incrementPage() : null\n                  }\n                  style={{\n                    display: this.visualPage == this.count ? \"none\" : \"block\",\n                  }}\n                  id=\"next\"\n                  class=\"next\"\n                >\n                  <a class=\"standalone-link\">\n                    Volgende\n                    <span class=\"visually-hidden\">pagina</span>\n                  </a>\n                </li>\n              </ul>\n            </nav>\n          )}\n        </div>\n      );\n    }\n  }\n}\n"],"mappings":"sFAAA,MAAMA,EAAa,8/BACnB,MAAAC,EAAeD,E,MCMFE,EAAO,M,oPAWlB,eAAYC,G,MACV,OAAOC,EAAAC,KAAKC,OAAG,MAAAF,SAAA,SAAAA,EAAEG,MAAM,I,CAGzB,qBAAYC,GACV,MAAMC,EAAWJ,KAAKI,SACtB,OAAOA,GAAYA,IAAa,GAC5BA,EACA,wD,CAGN,yBAAYC,GACV,MAAMC,EAAeN,KAAKM,aAC1B,OAAOA,GAAgBA,IAAiB,GAAKA,EAAe,W,CAG9D,MAAAC,G,QACE,OACEC,EAAA,MAAAC,IAAA,2CAAIC,MAAM,gCACRF,EAAA,WAAAC,IAAA,2CAASC,MAAM,kBACbF,EAAA,OAAAC,IAAA,2CAAKC,MAAM,mBACTF,EAAA,MAAAC,IAAA,2CAAIC,MAAM,MAAMV,KAAKW,aAEpBZ,EAAAC,KAAKF,eAAW,MAAAC,SAAA,SAAAA,EAAEa,QAAS,GAC1BJ,EAAA,OAAAC,IAAA,2CAAKC,MAAM,oBACTF,EAAA,MAAAC,IAAA,2CAAIC,MAAM,aACPG,EAAAb,KAAKF,eAAW,MAAAe,SAAA,SAAAA,EAAEC,KAAKb,GACtBO,EAAA,UACEA,EAAA,QAAME,MAAM,OAAK,IAAGT,EAAG,UAOjCO,EAAA,OAAAC,IAAA,2CAAKC,MAAM,yBACRV,KAAKe,aAAef,KAAKe,cAAgB,IACxCP,EAAA,KAAAC,IAAA,4CAAIT,KAAKe,aAGVf,KAAKgB,SAAWhB,KAAKgB,UAAY,IAChCR,EAAA,KAAAC,IAAA,2CACEQ,OAAO,SACPC,KAAM,kCAAkClB,KAAKgB,WAE5ChB,KAAKgB,SAGThB,KAAKmB,MAAQnB,KAAKmB,OAAS,IAAMX,EAAA,QAAAC,IAAA,4CAAOT,KAAKmB,OAGhDX,EAAA,KAAAC,IAAA,2CAAGS,KAAMlB,KAAKoB,YAAaV,MAAM,6BAC9BV,KAAKK,sBACNG,EAAA,QAAAC,IAAA,2CAAMC,MAAM,mBAAiB,SAAQV,KAAKW,UAAS,OAIvDH,EAAA,OAAAC,IAAA,2CAAKC,MAAM,kBACTF,EAAA,OAAAC,IAAA,2CAAKC,MAAM,uBAEXF,EAAA,OAAAC,IAAA,2CAAKC,MAAM,kBACTF,EAAA,UAAAC,IAAA,4CACED,EAAA,OAAAC,IAAA,2CAAKC,MAAM,gBAAe,aAAY,OACpCF,EAAA,OAAAC,IAAA,2CACEY,MAAM,MACNC,OAAO,MACPC,IAAKvB,KAAKG,kBACVqB,IAAI,UAOhBhB,EAAA,KAAAC,IAAA,2CACES,KAAK,IACLR,MAAM,sBACNe,UAAW,EAAC,cACA,QAEXzB,KAAKM,c,aClGhB,MAAMoB,EAAc,koBACpB,MAAAC,EAAeD,E,MCUFE,EAAQ,M,iNASM,E,UACD,E,wEAGS,G,iBACuB,G,gDAEzB,M,gBACD,C,CAE9B,iBAAAC,GACE7B,KAAK8B,cAAgB9B,KAAK+B,MAC1B,GACE/B,KAAKgC,cACLhC,KAAKgC,eAAiB,IACtBC,OAAOjC,KAAKgC,cACZ,CACAhC,KAAKkC,cAAgBD,OAAOjC,KAAKgC,a,CAEnChC,KAAKmC,iBAAmB,SAASnC,KAAKkC,wBAAwBlC,KAAKkC,cAAgBlC,KAAKoC,KAAOpC,KAAKkC,gBACpGlC,KAAK8B,eAAiB,IAAI9B,KAAKmC,mBAC/BnC,KAAKqC,eACLrC,KAAKsC,mB,CAGP,YAAIC,GACF,MAAMC,EAAM,IAAIC,IAAIzC,KAAK0C,UACzBF,EAAIG,aAAaC,IAAI,QAAS5C,KAAK8B,eACnC,OAAOU,C,CAGT,uBAAMF,GACJ,MAAME,EAAM,IAAIC,IAAIzC,KAAK0C,UACzBF,EAAIG,aAAaC,IAAI,QAAS5C,KAAK6C,YAEnC7C,KAAK8C,WAAa,KAClB,MAAMC,QAAiBC,MAAMR,EAAIS,WAAY,CAC3CC,QAAS,CACP,eAAgB,oCAChBC,OAAQ,qCAIZ,GAAIJ,EAASK,GAAI,CACf,MAAMC,QAAoBN,EAASO,OACnCtD,KAAKuD,MAAQtB,OAAOoB,EAAOG,QAAQC,SAAS,GAAGF,MAAMG,OACrD1D,KAAK8C,WAAa,K,KACb,CACLa,QAAQC,IAAI,kCACZD,QAAQC,IAAI5D,KAAK8B,c,EAIrB,kBAAMO,GAEJ,IAAKrC,KAAK6D,YAAYC,MAAMC,GAAQA,EAAI3B,OAASpC,KAAKoC,OAAO,CAC3D,MAAMW,QAAiBC,MAAMhD,KAAKuC,SAASU,WAAY,CACrDC,QAAS,CACP,eAAgB,oCAChBC,OAAQ,qCAIZ,GAAIJ,EAASK,GAAI,CACf,MAAMC,QAAoBN,EAASO,OAEnC,MAAMU,EAAOX,EAAOG,QAAQC,SAE5BzD,KAAK6D,YAAYI,KAAK,CACpB7B,KAAMpC,KAAKoC,KACXiB,OAAQW,IAGVhE,KAAKkE,iBAAmBF,C,KACnB,CACLL,QAAQC,IAAI,4BACZD,QAAQC,IAAI5D,KAAK8B,c,MAEd,CACL9B,KAAKkE,iBAAmBlE,KAAK6D,YAAYC,MACtCC,GAAQA,EAAI3B,OAASpC,KAAKoC,OAC3BiB,M,EAIN,qBAAIc,GACF,OAAOC,EAAqBpE,KAAK8B,cAAe9B,KAAKmC,iB,CAGvD,mBAAMkC,GACJ,GAAIrE,KAAKoC,KAAO,EAAG,CACjBpC,KAAK8B,cAAgB9B,KAAKmE,kBAC1BnE,KAAKoC,MAAQ,EAEbpC,KAAKmC,iBAAmB,SAASnC,KAAKkC,wBAAwBlC,KAAKkC,cAAgBlC,KAAKoC,KAAOpC,KAAKkC,gBACpGlC,KAAK8B,eAAiB9B,KAAKmC,uBACrBnC,KAAKqC,eACXrC,KAAKsE,YAAc,C,EAIvB,mBAAMC,GACJ,GAAIvE,KAAKoC,KAAOpC,KAAKuD,MAAO,CAC1BvD,KAAK8B,cAAgB9B,KAAKmE,kBAC1BnE,KAAKoC,MAAQ,EACbpC,KAAKmC,iBAAmB,SAASnC,KAAKkC,wBAAwBlC,KAAKkC,cAAgBlC,KAAKoC,KAAOpC,KAAKkC,gBACpGlC,KAAK8B,eAAiB9B,KAAKmC,uBACrBnC,KAAKqC,eACXrC,KAAKsE,YAAc,C,EAIvB,MAAA/D,G,QACE,GAAIP,KAAKuD,QAAU,GAAKvD,KAAKkE,iBAAkB,CAC7C,OACE1D,EAAA,OAAAC,IAAA,2CAAKC,MAAM,aACTF,EAAA,QAAAC,IAAA,2CAAMC,MAAM,gBACVF,EAAA,KAAAC,IAAA,uDAAYT,KAAKuD,MAAK,gBAExB/C,EAAA,MAAAC,IAAA,2CAAIC,MAAM,oBACPX,EAAAC,KAAKkE,oBAAgB,MAAAnE,SAAA,SAAAA,EAAEe,KAAK0D,I,cAAS,OACpChE,EAAA,YACEP,KAAKF,EAAAyE,EAAK,UAAM,MAAAzE,SAAA,SAAAA,EAAE2D,MAClB1C,SAASH,EAAA2D,EAAK,UAAM,MAAA3D,SAAA,SAAAA,EAAE6C,MAAK,aACf,OAAM,aACPe,EAAAD,EAAK,UAAM,MAAAC,SAAA,SAAAA,EAAEf,MACxB3C,aAAa2D,EAAAF,EAAK,UAAM,MAAAE,SAAA,SAAAA,EAAEhB,MAAK,iBAChBiB,EAAAH,EAAK,UAAM,MAAAG,SAAA,SAAAA,EAAEjB,MAC5BvC,KAAMyD,EAAwBJ,EAAK,SACnC,KAGNhE,EAAA,KAAAC,IAAA,2CACEC,MAAM,UACNQ,KACElB,KAAK6E,QAAU7E,KAAK6E,SAAW,GAC3B7E,KAAK6E,OACL,GAAG7E,KAAKuC,SAASU,eAGtBpC,EAAAb,KAAK8E,WAAO,MAAAjE,SAAA,EAAAA,EAAI,0CAElBb,KAAKuD,QAAU,GAAKvD,KAAKkE,kBACxB1D,EAAA,OAAAC,IAAA,2CAAKC,MAAM,QAAO,kBAAiB,sBACjCF,EAAA,MAAAC,IAAA,2CAAIsE,GAAG,qBAAqBrE,MAAM,mBAAiB,cAInDF,EAAA,MAAAC,IAAA,2CAAIC,MAAM,gBACRF,EAAA,MAAAC,IAAA,2CACEuE,QAAS,IACPhF,KAAKsE,aAAetE,KAAKoC,KAAOpC,KAAKqE,gBAAkB,KAEzDY,MAAO,CAAEC,QAASlF,KAAKsE,aAAe,EAAI,OAAS,SACnDS,GAAG,WACHrE,MAAM,YAENF,EAAA,KAAAC,IAAA,2CAAGC,MAAM,wBAAsB,SAE7BF,EAAA,QAAAC,IAAA,2CAAMC,MAAM,mBAAiB,YAGjCF,EAAA,MAAAC,IAAA,2CAAIC,MAAM,gBAAc,UACdV,KAAKsE,WAAU,QAAOtE,KAAKuD,OAGrC/C,EAAA,MAAAC,IAAA,2CACEuE,QAAS,IACPhF,KAAKsE,aAAetE,KAAKoC,KAAOpC,KAAKuE,gBAAkB,KAEzDU,MAAO,CACLC,QAASlF,KAAKsE,YAActE,KAAKuD,MAAQ,OAAS,SAEpDwB,GAAG,OACHrE,MAAM,QAENF,EAAA,KAAAC,IAAA,2CAAGC,MAAM,mBAAiB,WAExBF,EAAA,QAAAC,IAAA,2CAAMC,MAAM,mBAAiB,c","ignoreList":[]}